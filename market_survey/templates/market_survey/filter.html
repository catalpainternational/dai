{% extends "admin/base_site.html" %}
{% load i18n humanize %}

{% block extrastyle %}
<style>
p {padding: 5px;}
</style>
{% endblock %}

{% block extrahead %}
    <script type="text/javascript" src="/static/js/jquery-1.8.1.min.js"></script> 
    <script src="/static/js/jquery.tablesorter.js"></script>
{% endblock %}

{% block content %}
    {% if len(querystring)==0 %}
    <form action="" method="get">
        {{ filter.form.as_p }}
        <input type="submit" />
    </form>

    {% else %}<!--<hr>-->

    <div>
      <a href="?{{querystring}}&CSV=True">{% trans "Export as CSV" %}</a>
        <table class='sort_table' id='sort_table'>
            <thead>
                <tr>
                    <th>{% trans 'Vendor' %}</th>
                    <th>{% trans 'Vegetable' %}</th>
                    <th>{% trans 'Purchase Price' %}</th>
                    <th>{% trans 'Purchase Quantity' %}</th>
                    <th>{% trans 'Purchase Unit Price' %}</th>
                    <th>{% trans 'Sale Price' %}</th>
                    <th>{% trans 'Sale Quantity' %}</th>
                    <th>{% trans 'Sale Unit Price' %}</th>
                    <th>{% trans 'District Origin' %}</th>
                    <th>{% trans 'Profit Margin' %}</th>
                </tr>
            </thead>
        {% for obj in filter %}
            <tr>
                <td> {{ obj.vendor_survey}} </td>
                <td> {{ obj.vegetable }} </td>
                <td> ${{ obj.purchase_price|floatformat:2 }} </td>
                <td> {{ obj.purchase_quantity }} </td>
                <td> ${{ obj.purchase_unit_price|floatformat:2 }} </td>
                <td> ${{ obj.sale_price|floatformat:2 }} </td>              
                <td> {{ obj.sale_quantity }} </td>
                <td> ${{ obj.sale_unit_price|floatformat:2 }} </td>              
                <td> {{ obj.district }} </td>
                <td> {{ obj.profit_margin }}% </td>
            </tr>
        {% endfor %}
        </table>
    </div>
    {% endif %}
{% endblock %}
